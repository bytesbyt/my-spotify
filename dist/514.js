"use strict";(self.webpackChunkmy_spotify=self.webpackChunkmy_spotify||[]).push([[514],{7:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(2142),n=(r(6540),r(4848));const i=e=>{let{errorMessage:t}=e;return(0,n.jsx)(a.A,{severity:"error",children:t})}},6514:(e,t,r)=>{r.r(t),r.d(t,{default:()=>te});var a=r(6739),n=r(6858),i=r(3356),s=r(2944),o=r(5124),l=r(6540),c=r(5647),d=r(5147),p=r(2764),x=r(431),h=r(680),g=r(2077),u=r(4848);const y=(0,a.Ay)("div")({display:"flex",alignItems:"center",padding:"8px",justifyContent:"space-between"}),m=()=>(0,u.jsxs)(y,{children:[(0,u.jsxs)(n.A,{display:"flex",children:[(0,u.jsx)(h.A,{sx:{marginRight:"20px"}}),(0,u.jsx)(o.A,{variant:"h2",fontWeight:700,children:" Your Library"})]}),(0,u.jsx)(x.A,{children:(0,u.jsx)(g.A,{})})]});var f=r(2412);const j=(0,a.Ay)(f.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.background.paper,padding:"20px",borderRadius:"8px"}})),v=(0,a.Ay)(x.A)({marginTop:"20px",fontWeight:"700"}),A=()=>(0,u.jsxs)(j,{children:[(0,u.jsx)(o.A,{variant:"h2",fontWeight:700,children:" Create your first playlist "}),(0,u.jsx)(o.A,{variant:"body2",children:" It's easy, we'll help you "}),(0,u.jsx)(v,{variant:"contained",color:"secondary",children:"Create playlist"})]});var w=r(6475),b=r(1083),k=r(5800);const C=b.A.create({baseURL:k.$,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});C.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("access_token")),e)));const _=C;var S=r(7996),I=r(7),R=r(3497),P=r(8344),W=r(7715),L=r(5673);const N=(0,a.Ay)(R.A)((e=>{let{theme:t,selected:r}=e;return{padding:"8px",alignItems:"center",borderRadius:"8px",backgroundColor:r?t.palette.action.active:"","&:hover":{backgroundColor:t.palette.action.hover}}})),U=(0,a.Ay)(P.A)({width:"48px",height:"48px",borderRadius:"8px"}),q=(0,a.Ay)(o.A)({fontWeight:"bold",color:"#1db954"}),z=e=>{let{image:t,name:r,artistName:a,id:n,handleClick:i,selected:s}=e;return(0,u.jsxs)(N,{onClick:()=>i(n),selected:s||!1,children:[(0,u.jsx)(W.A,{children:t?(0,u.jsx)(U,{src:t,alt:r}):"No image"}),(0,u.jsx)(L.A,{primary:(0,u.jsx)(q,{children:r}),secondary:(0,u.jsx)(o.A,{variant:"body1",color:"text.secondary",children:a})})]})},E=e=>{let{playlists:t}=e;const[r,a]=(0,l.useState)(""),n=(0,c.Zp)(),i=e=>{a(e),n("/playlist/".concat(e))};return(0,u.jsx)("div",{children:t.map((e=>{var t,a;return(0,u.jsx)(z,{selected:r===e.id,handleClick:i,name:e.name||"",image:e.images&&(null===(t=e.images[0])||void 0===t?void 0:t.url)||null,id:e.id||"",artistName:"Playlist â€¢"+(null===(a=e.owner)||void 0===a?void 0:a.display_name)},e.id)}))})};var F=r(7286);const H=async()=>{try{return(await _.get("/me")).data}catch(e){throw new Error("fail to fetch user profile")}},D=()=>{const e=localStorage.getItem("access_token");return(0,F.I)({queryKey:["current-user-profile"],queryFn:H,enabled:!!e})};var T=r(5692);const Y=(0,a.Ay)("div")((e=>{let{theme:t}=e;return{overflowY:"auto",maxHeight:"calc(100vh - 240px)",height:"100%","&::-webkit-scrollbar":{display:"none",msOverflowStyle:"none",scrollbarWidth:"none"},[t.breakpoints.down("sm")]:{maxHeight:"calc(100vh - 65px - 119px)"}}})),B=()=>{const{ref:e,inView:t}=(0,T.Wx)(),{data:r,isLoading:a,error:n,hasNextPage:i,isFetchingNextPage:s,fetchNextPage:o}=(e=>{let{limit:t,offset:r}=e;return(0,w.q)({queryKey:["current-user-playlists",t,r],queryFn:e=>{let{pageParam:r=0}=e;return(async e=>{let{limit:t,offset:r}=e;try{return(await _.get("/me/playlists",{params:{limit:t,offset:r}})).data}catch(e){throw new Error("Failed to fetch current user playlists")}})({limit:t,offset:r})},initialPageParam:0,getNextPageParam:e=>{if(e.next){const t=new URL(e.next).searchParams.get("offset");return t?parseInt(t):void 0}}})})({limit:10,offset:0}),{data:c}=D();return(0,l.useEffect)((()=>{t&&i&&!s&&o()}),[t]),c?(console.log("ddd",r),a?(0,u.jsx)(S.A,{}):n?(0,u.jsx)(I.A,{errorMessage:n.message}):(0,u.jsx)("div",{children:r&&0!==(null==r?void 0:r.pages[0].total)?(0,u.jsxs)(Y,{children:[null==r?void 0:r.pages.map(((e,t)=>(0,u.jsx)(E,{playlists:r.pages[0].items},t))),(0,u.jsx)("div",{ref:e,children:s&&(0,u.jsx)(S.A,{})})]}):(0,u.jsx)(A,{})})):(0,u.jsx)(A,{})};var K=r(9783);const M=()=>(0,u.jsx)(x.A,{variant:"contained",color:"secondary",size:"large",onClick:()=>{(async()=>{const e=crypto.getRandomValues(new Uint8Array(64)).reduce(((e,t)=>e+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[t%62]),""),t=(r=await(async e=>{const t=(new TextEncoder).encode(e);return window.crypto.subtle.digest("SHA-256",t)})(e),btoa(String.fromCharCode(...new Uint8Array(r))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"));var r;const a=K.U6,n=k._,i=K.iW,s=new URL("https://accounts.spotify.com/authorize");if(window.localStorage.setItem("code_verifier",e),a&&n){const e={response_type:"code",client_id:a,scope:i,code_challenge_method:"S256",code_challenge:t,redirect_uri:n};s.search=new URLSearchParams(Object.entries(e)).toString(),window.location.href=s.toString()}})()},children:"Login"}),O=r.p+"images/blank_profile.png?ver=7a6a6c54279a54d1977c9127957a503b",V=(0,a.Ay)("div")({display:"flex",alignItems:"center",cursor:"pointer",borderRadius:"8px",padding:"0 8px",height:"100%"}),G=()=>{var e;const{data:t}=D(),r=(null==t||null===(e=t.images)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.url)||O;return(0,u.jsx)(n.A,{display:"flex",justifyContent:"flex-end",alignItems:"center",height:"64px",children:t?(0,u.jsx)(V,{children:(0,u.jsx)(P.A,{src:r,alt:t.display_name})}):(0,u.jsx)(M,{})})},X=(0,a.Ay)("div")({display:"flex",height:"100vh",padding:"8px",gap:"8px"}),Z=(0,a.Ay)("div")((e=>{let{theme:t}=e;return{width:"331px",height:"100%",display:"flex",flexDirection:"column",[t.breakpoints.down("sm")]:{display:"none"},gap:"8px"}})),J=(0,a.Ay)(n.A)((e=>{let{theme:t}=e;return{borderRadius:"8px",backgroundColor:t.palette.background.paper,color:t.palette.text.primary,width:"100%",overflowY:"auto",overflowX:"hidden",padding:"1rem"}})),Q=(0,a.Ay)(n.A)((e=>{let{theme:t}=e;return{borderRadius:"8px",backgroundColor:t.palette.background.paper,color:t.palette.text.primary,width:"100%",padding:"10px"}})),$=(0,a.Ay)("ul")({listStyle:"none",padding:0,margin:0}),ee=(0,a.Ay)(c.k2)((e=>{let{theme:t}=e;return{textDecoration:"none",display:"flex",alignItems:"center",gap:"20px",color:t.palette.text.secondary,"&:hover":{color:t.palette.text.primary},"&.active":{color:t.palette.text.primary}}})),te=()=>{const e=(0,i.A)();return(0,s.A)(e.breakpoints.down("sm")),(0,u.jsxs)(X,{children:[(0,u.jsxs)(Z,{children:[(0,u.jsx)(Q,{children:(0,u.jsxs)($,{children:[(0,u.jsx)("li",{children:(0,u.jsxs)(ee,{to:"/",children:[(0,u.jsx)(d.A,{}),(0,u.jsx)(o.A,{variant:"h2",fontWeight:700,children:"Home"})]})}),(0,u.jsx)("li",{children:(0,u.jsxs)(ee,{to:"search",children:[(0,u.jsx)(p.A,{}),(0,u.jsx)(o.A,{variant:"h2",fontWeight:700,children:"Search"})]})})]})}),(0,u.jsxs)(Q,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[(0,u.jsx)(m,{}),(0,u.jsx)(B,{})]})]}),(0,u.jsxs)(J,{sx:{p:{xs:0,sm:1,md:2}},children:[(0,u.jsx)(G,{}),(0,u.jsx)(c.sv,{})]})]})}}}]);
//# sourceMappingURL=514.js.map?ver=646ae38aab2c454768b4